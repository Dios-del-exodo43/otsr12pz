(self.webpackChunkHoroshop=self.webpackChunkHoroshop||[]).push([[817],{2325:function(){!function(t,e){t.currency={ceil_to:function(t,e){var n=t,i=0;return e>0&&(n*=i=10*e),n=Math.ceil(n),0!==i&&(n/=i),n},str:function(n,i,r,o){i=i!=e?i:0,r=r!=e?r:"",o=o!=e?o:" ";var a=t.GLOBAL.currency,s=1==a.position?a.abbr:"",c=2==a.position?a.abbr:"";return s+this.number_format(n,i,r,o)+c},wrap_html:function(e,n){n=n||"";var i=t.GLOBAL.currency,r=1==i.position?i.abbr:"",o=2==i.position?i.abbr:"";if(""!==n){var a=n.split(" ").pop();r=""!==r?"<"+n+">"+r+"</"+a+">":"",o=""!==o?"<"+n+">"+o+"</"+a+">":""}return r+e+o},number_format:function(t,n,i,r){var o,a;return isNaN(n=Math.abs(n))&&(n=2),i==e&&(i=","),r==e&&(r="."),(a=(o=parseInt(t=(+t||0).toFixed(n))+"").length)>3?a%=3:a=0,(a?o.substr(0,a)+r:"")+o.substr(a).replace(/(\d{3})(?=\d)/g,"$1"+r)+(n?i+Math.abs(t-o).toFixed(n).replace(/-/,0).slice(2):"")}}}(window)},5504:function(t,e,n){const i=n(9580);var r;(r=window).showPopup=i.showPopup,r.sendAjax=i.sendAjax,r.parseHashParams=i.parseHashParams,r.ajax_link_click=i.ajax_link_click,r.checkEmailValidity=i.checkEmailValidity,r.l10n=i.l10n,r.reloadLangWidget=i.reloadLangWidget,r.number_format=i.number_format,r.priceFormat=i.priceFormat,r.str_replace=i.str_replace,r.triggerMarketingEvent=i.triggerMarketingEvent,r.openSignInModal=i.openSignInModal,r.getCountText=i.getCountText,r.initCheckoutCartEvents=i.initCheckoutCartEvents,r.zteel_set_message=i.zteel_set_message,r.reloadPage=i.reloadPage,r.generateUUID=i.generateUUID,r.setInnerHTML=i.setInnerHTML},6702:function(t,e,n){window.AnalyticsHelper=new class{#t;#e;constructor(){this.#e=n(7301),this.#e.init()}getClientId(){return this.#t?this.#t:(document.cookie.split(";").some(function(t){const e=t.trim().match(/^(_ga=){1}(?<clientId>.*)$/);if(e)return this.#t=e.groups.clientId}.bind(this)),this.#t??"")}getCurrentUTM(){return this.#e.get.current}getDataInJson(){return{utm_source:this.getCurrentUTM().src,utm_medium:this.getCurrentUTM().mdm,utm_campaign:this.getCurrentUTM().cmp,utm_term:this.getCurrentUTM().trm,utm_content:this.getCurrentUTM().cnt,google_client_id:this.getClientId()}}}},5858:function(){const t={DATA_ATTR_NAME:"data-fake-href",FAKE_LINK_LIFE_TIME:25e3,links:[],init(){this.setLinks(),this.setListeners(),setTimeout((()=>this.modifyAllLinks()),this.FAKE_LINK_LIFE_TIME)},setLinks(){this.links=document.querySelectorAll(`[${this.DATA_ATTR_NAME}]`)},setListeners(){this.links.forEach((t=>{let e=!1;t.addEventListener("pointermove",(()=>{e=!0})),t.addEventListener("touchend",(n=>{!e&&t.getAttribute(this.DATA_ATTR_NAME)&&(this.modifyFakeToVeritableLink(t),t.click()),e=!1})),t.addEventListener("mouseover",(()=>this.modifyFakeToVeritableLink(t)))}))},modifyFakeToVeritableLink(t){var e=t.getAttribute(this.DATA_ATTR_NAME);e&&(t.setAttribute("href",e),t.removeAttribute(this.DATA_ATTR_NAME))},modifyAllLinks(){this.links.forEach((t=>this.modifyFakeToVeritableLink(t)))}};window.FakeHrefDirector=t},5542:function(){var t,e;t=window,(e=function(t){this.setSettings(t),this.init()}).prototype={originalSendHitTask:null,payloadRefLimit:2048,preparedToSendProducts:[],remainingProducts:[],offset:0,isValidOffset:!1,partsWasSent:0,errors:[],setSettings:function(t){this.products=t.products?t.products:this.addError("products"),this.hit=t.hit?t.hit:this.addError("hit"),this.eventCategory=t.eventCategory?t.eventCategory:this.addError("eventCategory"),this.eventAction=t.eventAction?t.eventAction:this.addError("eventAction"),this.fieldSetter=t.fieldSetter?t.fieldSetter:this.addError("fieldSetter")},init:function(){if(this.errors.length)return this.showErrors(),!1;this.remainingProducts=this.products,this.attachEvents(),this.performDefaultEvent()},addError:function(t){return this.errors.push(t),null},showErrors:function(){this.errors.forEach((function(t){console.log("В конструктор не передано обязательное свойство "+t)}))},performDefaultEvent:function(){this.fieldSetter(this.hit,this.products)},attachEvents:function(){var t=this;ga((function(e){t.originalSendHitTask=e.get("sendHitTask"),e.set("sendHitTask",(function(n){t.isValidPayloadSize(n.get("hitPayload"))?(t.originalSendHitTask(n),e.set("sendHitTask",t.originalSendHitTask),t.isDefaultEventSentOut=!1===t.isDefaultEventSentOut):setTimeout((function(){t.initSender()}),100)}))}))},isValidPayloadSize:function(t){return this.payloadRefLimit>encodeURI(t).split(/%..|./).length-1},initSender:function(){this.attachSenderEvents(),this.runSender()},attachSenderEvents:function(){var t=this;ga((function(e){e.set("sendHitTask",(function(e){t.isValidPayloadSize(e.get("hitPayload"))?(t.originalSendHitTask(e),t.preparedToSendProducts=[],t.remainingProducts=t.remainingProducts.slice(t.offset),t.isValidOffset=!0,++t.partsWasSent):t.isValidOffset=!1,t.isValidOffset||1!==t.offset?setTimeout((function(){t.runSender()}),100):(t.setDefaultSendHitTask(),t.send())}))}))},runSender:function(){this.updateProducts(),this.preparedToSendProducts.length||this.remainingProducts.length?(this.performEvent(this.hit,this.preparedToSendProducts),this.send()):this.setDefaultSendHitTask()},updateProducts:function(){var t=this.preparedToSendProducts.length?this.preparedToSendProducts:this.remainingProducts;this.offset=this.isValidOffset?this.offset:Math.ceil(t.length/2),this.preparedToSendProducts=t.slice(0,this.offset)},performEvent:function(t,e){this.fieldSetter(t,e)},send:function(){this.isFirstPart()?ga("send","pageview"):(ga("ec:setAction",this.eventAction),ga("send","event",this.eventCategory,this.eventAction))},isFirstPart:function(){return 0===this.partsWasSent},setDefaultSendHitTask:function(){var t=this;ga((function(e){e.set("sendHitTask",t.originalSendHitTask)}))}},t.GAHelper=e},9580:function(t,e,n){var i,r=n(3053),o=n(3053);function a(t,e,n,i){var r=0,o="",a="",s=0,c=[].concat(t),d=[].concat(e),u=n,h="[object Array]"===Object.prototype.toString.call(d),l="[object Array]"===Object.prototype.toString.call(u);u=[].concat(u),i&&(this.window[i]=0);for(var f=0,p=u.length;f<p;f++)if(""!==u[f])for(r=0,s=c.length;r<s;r++)o=u[f]+"",a=h?void 0!==d[r]?d[r]:"":d[0],u[f]=o.split(c[r]).join(a),i&&u[f]!==o&&(this.window[i]+=(o.length-u[f].length)/c[r].length);return l?u:u[0]}function s(t,e){var n=[],i=[];for(var r in n.push("{BR}"),i.push("<br>"),n.push("{BREAK_LINE}"),i.push("<br>"),e)e.hasOwnProperty(r)&&(n.push(r),i.push(e[r]));return GLOBAL.l10n&&GLOBAL.l10n[t]?a(n,i,GLOBAL.l10n[t]):(c(GLOBAL.URI_PREFIX+"_widget/l10n/set/",{value:t}),GLOBAL.l10n[t]=t,a(n,i,t))}function c(t,e,n,i){return i=i||"POST","function"==typeof e&&(n=e,e={}),null===e&&(e={}),0===t.indexOf("/js/")&&(t="/themes/"+GLOBAL.theme+"/layout"+t),o.ajax({beforeSend:function(t){t.setRequestHeader("X-CSRF-Token",GLOBAL.GLOBAL_CSRF_TOKEN)},dataType:"json",type:i,url:t,async:!0,data:e,error:function(t){var e="ERROR",i={};"abort"===t.statusText&&(e="CANCELED"),t.responseJSON&&t.responseJSON.status&&(e=t.responseJSON.status,i=t.responseJSON.response),"function"==typeof n&&n(e,i),o(document).trigger("afterSendAjax"),"HTTP_ERROR"===e&&o(document).trigger("ajaxHttpError",e,i)},success:function(t){var e=t&&t.status||"NOT_LOADED",i=t&&t.response||{};"function"==typeof n&&n(e,i),o(document).trigger("afterSendAjax")}})}function d(t,e,n,i){void 0!==e&&""!=e||(e="success");var r="session-message s-ok";switch(e){case"warning":r="session-message s-warn";break;case"error":r="session-message s-error";break;default:r="session-message s-ok"}var a='<div class="'+r+'">'+t+'<a href="#" onclick="$(this).parent().remove(); return false;"></a></div>',s=void 0===n||""===n?"#j-sm":n;!0===i&&o(s).empty(),o(s).show().append(a)}!function(t){t.fn.reset=function(){return this.each((function(){t(this).is("form")&&this.reset()}))},t.fn.selectRange=function(t,e){return this.each((function(){if(this.setSelectionRange)this.focus(),this.setSelectionRange(t,e);else if(this.createTextRange){var n=this.createTextRange();n.collapse(!0),n.moveEnd("character",e),n.moveStart("character",t),n.select()}}))}}(r),function(t){t.fn.preload=function(){return this.each((function(){var e=t(this);if(e.is("img")){var n=t('<div class="tm-preload"></div>').insertBefore(e).show();e.hide(),e.load((function(){n.hide(),e.show()}))}}))}}(r);var u,h=function(){var t=o(this),e=t.data("rel"),n=t.data("href")||t.attr("href");return null==e&&(e="replace"),c(n,null,(function(n,i){var r;"OK"===n?i.html?"replace"===e?(o(i.html).off("click").on("click",h).insertAfter(t),t.remove()):o(e).html(i.html):i.hasOwnProperty("redirect")?location.href=i.redirect:p():"UNAUTHORIZED"===n&&(r=i.message,Modal.open("#sign-in"),(r=r||s("Для добавления товара в список желаний Вам необходимо авторизироваться"))&&d(r,"error",".j-signup-info-message, .j-login-info-message",!0))})),!1};function l(t,e){if(GLOBAL&&GLOBAL.marketingEvents){var n=GLOBAL.marketingEvents;if(n[t])for(var i=0,r=n[t].length;i<r;++i){var o=n[t][i];e=Array.isArray(e)?e:[e];try{o.apply(null,e)}catch(t){console.log(t)}}}}function f(t,e,n,i){var r,o;return isNaN(e=Math.abs(e))&&(e=2),null==n&&(n=","),null==i&&(i="."),(o=(r=parseInt(t=(+t||0).toFixed(e))+"").length)>3?o%=3:o=0,(o?r.substr(0,o)+i:"")+r.substr(o).replace(/(\d{3})(?=\d)/g,"$1"+i)+(e?n+Math.abs(t-r).toFixed(e).replace(/-/,0).slice(2):"")}function p(){window.location.reload()}Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){return r.inArray(t,this,e)}),function(t,e,i){t.Widgets=t.Widgets||{};var r={};t.Widgets.Hint={cache:{},writeCache:function(t,e){this.cache[t]=e},readCache:function(t){return null!=this.cache[t]&&this.cache[t]},loadHintContent:function(t,n,i,r){var o=this,a=function(t,e){e=e||{},""==(t=t instanceof Array?t.join("/"):t)[0]&&(t=t.substr(1,t.length-1));var n=e?"?"+function(t){var e=[];for(var n in t)e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")}(e):"";return GLOBAL.URI_PREFIX+t+GLOBAL.URI_SUFFIX+n}(["_widget","hint","loadHintContent"]);if(this.readCache(t)){var s=this.readCache(t);s.title&&e(n).show().html(s.title),e(i).show().html(s.text),r&&r("OK",s)}else c(a,{hintId:t},(function(a,s){"OK"===a&&(s.title&&e(n).show().html(s.title),e(i).show().html(s.text),o.writeCache(t,s)),r&&r(a,s)}))},initHintContentLoader:function(t,e,n,i,r){var o=this.getHintLoader(t,e);o&&o(n,i,r)},getHintLoader:function(t,e){var n=t+"_"+(e?"inModal":"inPopup");return r.hasOwnProperty(n)?r[n]:r.hasOwnProperty(t)?r[t]:null},registerHintLoader:function(t,e,n){var i=t;void 0!==n&&(i+="_"+(n?"inModal":"inPopup")),r[i]=e}};var o=function(e,n,i,r,o){t.Widgets.Hint.loadHintContent(e,r.find(".j-hint-title"),r.find(".j-hint-text"),(function(t,e){"OK"!==t?r.find(".j-hint-text").show().html(s("Ошибка загрузки подсказки")):(i.off("click.widget-hint"),o&&o())}))};t.Widgets.Hint.registerHintLoader("default",(function(t,n,i){var r=e("#widget-hint-default-"+t+"-"+i),a=e("#hint-popup-"+t+"-"+i);r.find(".product-hint-btn").on("click.widget-hint",(function(){return o(t,0,e(this),a),!1}))}),!0),t.Widgets.Hint.registerHintLoader("default",(function(t,n,i){var r=e("#widget-hint-default-"+t+"-"+i);r.find(".product-hint-btn").on("click.widget-hint",(function(){return o(t,0,e(this),r),!1}))}),!1),t.Widgets.Hint.registerHintLoader("filter",(function(t,n,i){var r=e("#widget-hint-filter-"+t+"-"+i),a=e("#filter-hint-popup-"+t+"-"+i);r.on("click.widget-hint",(function(){return o(t,0,e(this),a),!1}))}),!0),t.Widgets.Hint.registerHintLoader("filter",(function(n,i,r){e("#widget-hint-filter-"+n+"-"+r).on("click.widget-hint",(function(){var a=e(this),s=!1!==t.Widgets.Hint.readCache(i);o(n,0,a,e('[data-id="filter-tooltip-'+n+"-"+r+'"]'),(function(){s||setTimeout((function(){a.data("hsTooltip").popperInstance.update()}),1)}))}))}),!1),t.Widgets.Hint.registerHintLoader("mobile-icon",(function(t,i,r){var a=e(".widget-hint-mobile-icon-"+t+"-"+r),s=e("#features-hint-"+t+"-"+r);a.on("click.widget-hint",(function(){o(t,0,e(this),s,(function(){s.find("img").length?Promise.resolve().then(n.t.bind(n,853,23)).then((e=>{let{default:n}=e;n(s[0],(function(){App.mmenu.getAPI("features-hint-"+t+"-"+r).updateHeight()}))})):App.mmenu.getAPI("features-hint-"+t+"-"+r).updateHeight(),App.setTableWrap(s)}))}))})),t.Widgets.Hint.registerHintLoader("mobile-link",(function(t,i,r){var a=e(".widget-hint-mobile-link-"+t+"-"+r),s=e("#features-hint-"+t+"-"+r);a.on("click.widget-hint",(function(){o(t,0,e(this),s,(function(){s.find("img").length?Promise.resolve().then(n.t.bind(n,853,23)).then((e=>{let{default:n}=e;n(s[0],(function(){App.mmenu.getAPI("features-hint-"+t+"-"+r).updateHeight()}))})):App.mmenu.getAPI("features-hint-"+t+"-"+r).updateHeight(),App.setTableWrap(s)}))}))}))}(window.Horoshop=window.Horoshop||{},r),(u=window).horoshopReCaptcha={googleRecaptchaSrc:"https://www.google.com/recaptcha/api.js?onload=onHoroshopReCaptchaLoaded&render=explicit",googleRecaptchaTagAdded:!1,googleRecaptchaLoaded:!1,siteKey:null,forms:[],rendered:[],addGoogleRecaptchaTag(){const t=document.querySelector("head"),e=document.createElement("script");e.src=this.googleRecaptchaSrc,t.append(e),this.googleRecaptchaTagAdded=!0},attach(t,e){const n=document.querySelector(t);this.forms.push(n),this.siteKey=e;const i=n.querySelectorAll('textarea, select, input:not([type="submit"]):not([type="button"])'),r=()=>{this.googleRecaptchaTagAdded?this.googleRecaptchaLoaded&&!this.rendered.includes(n)&&this.render(n):this.addGoogleRecaptchaTag(),i.forEach((t=>t.removeEventListener("focus",r)))};i.forEach((t=>t.addEventListener("focus",r)))},render(t){const e=t.querySelector('[type="submit"]'),n=grecaptcha.render(e,{sitekey:this.siteKey,callback:function(){t.dispatchEvent(new Event("submit",{cancelable:!0})),grecaptcha.reset(n)},"error-callback":function(){alert(s("Возникла ошибка при сохранении формы. Обновите страницу и попробуйте еще раз."))},"expired-callback":function(){alert(s("Возникла ошибка при сохранении формы. Обновите страницу и попробуйте еще раз."))}});this.rendered.push(t)},renderAttached(){this.forms.forEach((t=>this.render(t))),this.googleRecaptchaLoaded=!0}},u.onHoroshopReCaptchaLoaded=function(){u.horoshopReCaptcha.renderAttached()},o((function(){ModificationChange.getInstance()&&ModificationChange.getInstance().attachEventHandlers({onAfterSubmit:function(t,e){setTimeout((function(){l("ajax_page_view",window.location.href)}),300)}}),CatalogBuilder&&CatalogBuilder.attachEventHandlers({onFilterLinkClick:function(t){l("ajax_page_view",t.attr("href"))}})})),e.showPopup=function(t,e,n){null==i||i.closed||i.close(),null==e&&(e=656),null==n&&(n=296);var r=Math.round(screen.availHeight/2-n/2)-18,o=Math.round(screen.availWidth/2-e/2)-9;i=window.open(t,"","top="+r+",left="+o+",directories=0,location=0,menubar=0,status=0,toolbar=0,scrollbars=2,resizable=0,width="+e+",height="+n)},e.sendAjax=c,e.parseHashParams=function(){for(var t={},e=window.location.hash.substring(1).split("&"),n=0;n<e.length;n++){var i=e[n].split("=");t[i[0]]=void 0===i[1]?"":i[1]}return t},e.ajax_link_click=h,e.checkEmailValidity=function(t){return/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)},e.l10n=s,e.reloadLangWidget=function(){var t=o('[data-widget="lang_menu"]'),e=[],n=[{name:"requestedUrl",value:window.location.href}];t.length&&(t.each((function(){var t=o(this).attr("data-skin")||"default",i=o(this).attr("data-show-icon");-1===o.inArray(t,e)&&(e.push(t),n.push({name:"skins[]",value:t},{name:"showIcon",value:i}))})),c(GLOBAL.URI_PREFIX+"_widget/lang_menu/renderMultiple",n,(function(e,n){if("OK"===e){for(var i=0,r=n.data.length;i<r;++i){var a=n.data[i].skin,s=o(n.data[i].html);t.filter('[data-skin="'+a+'"]').replaceWith(s)}o(document.body).trigger("onLangWidgetReload",t)}})))},e.number_format=f,e.priceFormat=function(t){return currency.wrap_html(f(t,GLOBAL.round_to,"."," "))},e.str_replace=a,e.triggerMarketingEvent=l,e.openSignInModal=function(t){if(Modal.open("#sign-in"),o('a[href="#j-popup-tab-auth"]').trigger("click"),t){var e=o('#j-popup-tab-auth, [data-content-id="j-popup-tab-auth"]');e.find(':input[name="user[email]"]').val(t),setTimeout((function(){e.find(':input[name="user[pass]"]').focus()}),100)}},e.getCountText=function(t,e,n,i){var r="";if(e=e||s("товар"),n=n||s("товара"),i=i||s("товаров"),t>10&&t<20)r=i||s("товаров");else switch(t.toString().substr(-1)){case"1":r=e;break;case"2":case"3":case"4":r=n;break;default:r=i}return r},e.initCheckoutCartEvents=function(){var t=CheckoutModule.getInstance(),e=t.getComponentByName("Delivery"),n=t.getComponentByName("Payment"),i=t.getComponentByName("Recipient"),r=AjaxCart.getInstance();r.attachEventHandlers({onQuantityChanged:function(){t.reload()},onProductRemoved:function(){0===this.products.length?(t.container.find(".j-loader").show(),window.location.href=window.GLOBAL.URI_PREFIX):t.reload()},onCouponChange:function(){t.reload()}}),e.attachEventHandlers({changeDeliveryType:function(){r.reloadHtml()},beforeAjax:function(){this.owner.container.find(".j-loader").show()},afterAjax:function(){this.owner.container.find(".j-loader").hide()}}),n.attachEventHandlers({changePaymentType:function(){r.reloadHtml()},beforeAjax:function(){this.owner.container.find(".j-loader").show()},afterAjax:function(){this.owner.container.find(".j-loader").hide()}}),i.attachEventHandlers({changeCity:function(){r.reloadHtml()},changeCountry:function(){r.reloadHtml()},onBeforeChangeCity:function(){this.owner.getComponentByName("Delivery").disableComponent(),this.owner.getComponentByName("Payment").disableComponent(),this.owner.disableSubmitButton()},onBeforeChangeCountry:function(){this.owner.getComponentByName("Delivery").disableComponent(),this.owner.getComponentByName("Payment").disableComponent(),this.owner.disableSubmitButton()}})},e.zteel_set_message=d,e.reloadPage=p,e.generateUUID=function(){var t=(new Date).getTime(),e=performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(n){var i=16*Math.random();return t>0?(i=(t+i)%16|0,t=Math.floor(t/16)):(i=(e+i)%16|0,e=Math.floor(e/16)),("x"===n?i:3&i|8).toString(16)}))},e.setInnerHTML=function(t,e){t.innerHTML=e,Array.from(t.querySelectorAll("script")).forEach((function(t){const e=document.createElement("script");Array.from(t.attributes).forEach((function(t){e.setAttribute(t.name,t.value)})),e.appendChild(document.createTextNode(t.innerHTML)),t.parentNode.replaceChild(e,t)}))}}}]);